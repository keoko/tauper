#+title: Tasks
* Tasks
** DONE only owner can view the games/show page
** TODO display time/questions answered at the top in a bar?
** DONE implement valences is_correct function
** DONE fix periodic table overflow
** DONE individual game
** DONE send score email
** DONE display flash message when email is sent or not
** TODO email is marked as spam
** TODO translate errors in CA
** TODO translate app error messages
** DONE remove special elements
** DONE valences are wrong
** DONE not sensitive to lowercase/uppercase in checking element name
** DONE start game / waiting to start the game / player already in game
** DONE display if it worked/failed in player window -> me lo ha contado bien o mal,
** DONE display answer in scoring page
** DONE list_games
** TODO running out of time
** DONE i18n
** DONE locales "en" and "ca"
** DONE valences questions are not generated
** DONE display number of answers in started mode
** DONE disable start game if there are no players in the game
** DONE display number of questions remainins questions?
** DONE display users in rows instead of bulleted lists
** TODO display what the player responded in final podium?
** DONE remove page title in LVs
it does not add any value
** DONE remove lobby channel?
** TODO animate 3 waiting dots
** TODO use game map instead passing fields in assign?
Does it impact to socket refresh?
** TODO questions are always in catalan
** TODO use live_action to diplay different states: podium, final_podium, question, start_game
** DONE remove game schema
The game data has been moved to the genserver, so there is no need to keep the game data in DB.
** DONE remove auth-related files
** DONE configure time per question
** DONE redirect to join page does not work
** DONE add the rest of elements
** DONE time is not properly displayed sometimes when starting next question
** DONE display periodic table with highlighted cell
** DONE remove game actions not needed (edit game, etc.)
** DONE rename live_game.ex to live/game_live/play.ex
** DONE can we remove "next_question" event?
Yes, it looks like "status_changed" would be enough.
** DONE joining an invalid game throws an error
** DONE stop timer when in paused status
** DONE skip question
** DONE create table with player names and scores instead of bullet points
** DONE score with timing
** DONE once answered the question, hide question and display message waiting next question
** DONE timer goes too fast
I didn't return properly the state in sart_game and there were multiple timers active at the same time.
** DONE display player score in paused state
** DONE change phoenix header with a tauper game
** DONE build questions based on user-provided params (e.g. max number of questions, columns, etc.)
** DONE stop game
** DONE time per question
** DONE if all players have answered the question move to the next one
** DONE move next question to show liveview
** DONE different views based on game owner/player
yes, it should be split in 2 views: one to handle the game by the game owner, and the other one will be the player view.
** DONE do we have to use different channel topics per game?
it would help to reduce the propagation of unnecessary messages between games
** DONE next question does not refresh all users
** DONE start game does not refresh all users
send event when there is a  ny game change?
** DONE show podium as last page
** DONE start game
** DONE next question
** DONE game status
** DONE remove games schema and use gensver instead.
** DONE shuffle list of questions
** TODO keep players list in the game server? or only in the presence?
It could be interesting to keep the list of users in the game server to control only allowed users can play.
** TODO multiple liveviews or liveview with compoments?
** TODO how to handle changed game state to refresh liveviews?
- send whole game state as response for any request?
- send only changed state
- do not send any state. LiveViews will request data if needed based on events received.

** TODO how to validate schenaless ecto list of type enum
https://alexgaribay.com/ecto-enum-in-schemaless-changesets/
** DONE score
** DONE learn about presence
** DONE learn about channels
** DONE create game resource
** DONE game changeset
** DONE game code unique index / constraint?
** DONE generate game code when creating game
** DONE create new game
** DONE list participants in game page
** DONE on_mount
** DONE how to connect iex to list the presence list of users
** DONE how to pass game-id through the live route
** DONE how to move render function to a live template
create a file in the same liveview folder with name {liveview_name}.html.heex
** DONE how to login a player
** DONE do we have a live view page or a live view compoent?
** DONE how sessions work in liveview
** DONE what is the difference between a request session and liveview session
** TODO what is live_socket_id
** DONE list only participants of the game
** DONE change header to Passa Paraula
** DONE join game
** DONE start game
*
* Concepts
** Game
** Player
** Score
** Turn
** Player Team
** Word
** Timer?

* References
** Sasa Juric card game https://www.theerlangelist.com/article/spawn_or_not
** GenServer, DynamicSupervisor and Registry: The Elixir Triad To Manage Processes https://levelup.gitconnected.com/genserver-dynamicsupervisor-and-registry-the-elixir-triad-to-manage-processes-a65d4c3351c1
** Multiplayer Go with Elixir's Registry, PubSub and dynamic supervisors https://blog.appsignal.com/2019/08/13/elixir-alchemy-multiplayer-go-with-registry-pubsub-and-dynamic-supervisors.html
** A better way to set and manage locale data in your phoenix apps
https://phrase.com/blog/posts/set-and-manage-locale-data-in-your-phoenix-l10n-project/

* Elixir feeling
** no documentation how to manage explicit javascript in phoenix
** no clear documentation about liveview
** maps with key strings or atoms?
** keyword lists and maps are confusing
** keyword lists and atoms are confusing

* LiveView
** upload files
** secure liveviews
** TODO component liveviews
** SEO-friendly
** optimised data transfer
** TODO does it add extra load to the system? manage all websocket connections?
* Nice to haves
** ECS
** elixir state machines gen fsm?
** watcher mode: connect to a game just for wantching the game
** purge zombie games. Kill games live more than 24h
** build and display link to share with players when creating new game
only display "player" field when passing the game as a parameter.
